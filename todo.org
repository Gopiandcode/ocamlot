#+PROPERTY: Effort_ALL 0:30 1:00 2:00 3:00 4:00 5:00 6:00 7:00
#+COLUMNS: %40ITEM(Task) %17Effort(Estimated Effort){:} %CLOCKSUM
* Completed Tasks
** DONE Support Following [remote] users
CLOSED: [2022-09-23 Fri 16:19]
*** DONE Add list users option to [[file:lib/server/navigation.ml::let build_navigation_bar req =][header builder]]
CLOSED: [2022-09-21 Wed 06:49]
*** DONE create users page with search bar + follow button for each entry 
CLOSED: [2022-09-23 Fri 09:26]
**** DONE Create users page and list users
CLOSED: [2022-09-22 Thu 11:58]
**** DONE Add option to search for remote users
CLOSED: [2022-09-22 Thu 11:58]
**** DONE On local search query, do query search
CLOSED: [2022-09-22 Thu 12:12]
**** DONE On remote search query
CLOSED: [2022-09-23 Fri 09:26]
***** DONE do search using like for users
CLOSED: [2022-09-23 Fri 09:24]
***** DONE match query - if username without domain
CLOSED: [2022-09-23 Fri 09:26]
****** DONE collect known remote instances who don't have the user
CLOSED: [2022-09-23 Fri 09:25]
****** DONE if there are remote instances without the user, add task for search user to worker
CLOSED: [2022-09-23 Fri 09:26]
***** DONE match query - if username with domain 
CLOSED: [2022-09-23 Fri 09:26]
****** DONE send task for search user to worker
CLOSED: [2022-09-23 Fri 09:26]
*** DONE send [[file:lib/server/worker.ml::type task =][local follow task]] to worker
CLOSED: [2022-09-23 Fri 10:18]
*** DONE Update worker to [[file:lib/server/worker.ml][send follow request]]
CLOSED: [2022-09-23 Fri 14:43]
**** DONE resolve remote user
CLOSED: [2022-09-23 Fri 14:42]
**** DONE create follow object
CLOSED: [2022-09-23 Fri 14:43]
*** DONE show pending follow requests in user list
CLOSED: [2022-09-23 Fri 14:57]
*** DONE Add routing for [[file:lib/server/server.ml::Activity.route config; *][retrieving activities]] (for follow requests)
CLOSED: [2022-09-23 Fri 16:19]
*** DONE Fix [[file:lib/server/actor.ml::Dream.post ":username/inbox" (handle_inbox_post config); *][post to inbox]] enough to receive follow requests*
CLOSED: [2022-09-23 Fri 16:19]
*** DONE Update [[file:lib/server/actor.ml::let handle_actor_get_html _config req =][profile page]] to list following, followers and posts
CLOSED: [2022-09-23 Fri 16:19]
** DONE Support viewing posts by remote users
CLOSED: [2022-09-24 Sat 09:13]
*** DONE Follow remote user on pleroma
CLOSED: [2022-09-23 Fri 16:20]
*** DONE Fix [[file:lib/server/actor.ml::Dream.post ":username/inbox" (handle_inbox_post config); *][post to inbox]] enough to receive posts*
CLOSED: [2022-09-24 Sat 09:13]
*** DONE Update view actor html to allow displaying remote users
CLOSED: [2022-09-24 Sat 09:13]
** DONE Update worker [[file:lib/server/worker.ml::""][post function]] to build proper activitypub post
CLOSED: [2022-09-24 Sat 10:59]
** DONE Log messages that fail to parse if debug mode
CLOSED: [2022-09-24 Sat 12:59]
** DONE UI Fixes
CLOSED: [2022-09-25 Sun 03:31]
*** DONE Fix feed posts and correctly classify between posts with & w/o titles
CLOSED: [2022-09-25 Sun 02:18]
*** DONE Fix content and source in messages
CLOSED: [2022-09-25 Sun 02:19]
*** DONE Fix next and prev buttons on posts
CLOSED: [2022-09-25 Sun 03:31]
* Tasks for beta release
** TODO Implement support for //user/<user-name/outbox// to view public posts (it's essentially followers)
:PROPERTIES:
:Effort:   0:10
:END:
** TODO Implement support for //posts/<post-id>//
:PROPERTIES:
:Effort:   2:00
:END:
*** TODO Update posts to include links to posts
** TODO Add support for likes
:PROPERTIES:
:Effort:   2:00
:END:
*** TODO Add task to worker to update likes 
*** TODO On post to inbox with like object send like to worker
#+begin_src ocaml
`Like (  Types.id =
"https://pleroma.ocamlot.xyz/activities/963b35f5-082b-4ded-b4";
actor ="https://pleroma.ocamlot.xyz/users/borris";
published = None;
obj = "https://testing.ocamlot.xyz/activity/30393850-3a79-4ccf-af9a";
raw = {
  "@context": [
    "https://www.w3.org/ns/activitystreams",
    "https://pleroma.ocamlot.xyz/schemas/litepub-0.1.jsonld",
    {
      "@language": "und"
    }
  ],
  "actor": "https://pleroma.ocamlot.xyz/users/borris",
  "cc": [
    "https://www.w3.org/ns/activitystreams#Public"
  ],
  "context": "https://pleroma.ocamlot.xyz/contexts/6ffb2988-0",
  "id": "https://pleroma.ocamlot.xyz/activities/963b35f5-082b",
  "object": "https://testing.ocamlot.xyz/activity/30393850-3a",
  "to": [
    "https://pleroma.ocamlot.xyz/users/borris/followers",
    "https://testing.ocamlot.xyz/users/sarah"
  ],
  "type": "Like"
} })

#+end_src
*** TODO update worker to insert likes into db if not already liked
*** TODO Update feed post viewer to display link on toasts option
** TODO Add support for toasts
:PROPERTIES:
:Effort:   2:00
:END:
*** TODO Work out why toasts fail to validate - announce objects
** TODO Implement user profiles
*** TODO Properly display user
*** TODO Add option to edit, if is current user == profile user
*** TODO Implement support for uploading files
** TODO Handle post deletion
*** TODO Handle deleted posts requests from remote 
*** TODO Allow deleting posts from remote
** TODO Add support for replies
** TODO Handle updating user profiles
* Tasks for alpha release
** TODO Add support for collecting user posts from remote instances (outbox?)
*** TODO when adding a user for the first time, if not known to the system, queue a task to load in all their public posts 
** TODO Add admin page
*** TODO Conditional registrations
*** TODO Invite codes
** TODO Add support for database migration
* Todos
** DONE Update html with edit page
CLOSED: [2023-01-23 Mon 09:32]
** TODO Add interface to images to save image (filename + data) (maybe bring in conan?)
** TODO Support for user uploaded images
*** DONE Add table to track user images + hashes
CLOSED: [2023-01-23 Mon 10:39]
*** DONE Add parameter to configuration for user uploaded images 
CLOSED: [2023-01-23 Mon 11:23]
*** DONE Add endpoint for viewing uploaded images
CLOSED: [2023-01-23 Mon 11:28]
*** DONE Update local user to have profile image option
CLOSED: [2023-01-23 Mon 11:42]
*** DONE Update login form to display current avatar and option to upload avatar
CLOSED: [2023-01-24 Tue 06:45]
** TODO Lookup table description for local user
** TODO Add table for user uploaded images
** TODO Track alt for images
